<!DOCTYPE HTML>
<html lang="ja" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AtCoder in Haskell</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> å§‹ã‚ã«</a></li><li class="chapter-item expanded "><a href="books.html"><strong aria-hidden="true">2.</strong> æ›¸ç±</a></li><li class="chapter-item expanded "><a href="setup/SUMMARY.html"><strong aria-hidden="true">3.</strong> ç’°å¢ƒæ§‹ç¯‰</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="setup/cli.html"><strong aria-hidden="true">3.1.</strong> CLI ãƒ„ãƒ¼ãƒ«</a></li><li class="chapter-item expanded "><a href="setup/project-structure.html"><strong aria-hidden="true">3.2.</strong> ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ</a></li></ol></li><li class="chapter-item expanded "><a href="library/SUMMARY.html"><strong aria-hidden="true">4.</strong> ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="library/array.html"><strong aria-hidden="true">4.1.</strong> array</a></li><li class="chapter-item expanded "><a href="library/bytestring.html"><strong aria-hidden="true">4.2.</strong> bytestring</a></li><li class="chapter-item expanded "><a href="library/containers.html"><strong aria-hidden="true">4.3.</strong> containers</a></li><li class="chapter-item expanded "><a href="library/vector.html"><strong aria-hidden="true">4.4.</strong> bector</a></li><li class="chapter-item expanded "><a href="library/vector-algorithms.html"><strong aria-hidden="true">4.5.</strong> vector-algorithms</a></li><li class="chapter-item expanded "><a href="library/primitive.html"><strong aria-hidden="true">4.6.</strong> primitive</a></li><li class="chapter-item expanded "><a href="library/text.html"><strong aria-hidden="true">4.7.</strong> text</a></li><li class="chapter-item expanded "><a href="library/transformers.html"><strong aria-hidden="true">4.8.</strong> transformers</a></li></ol></li><li class="chapter-item expanded "><a href="monads/SUMMARY.html"><strong aria-hidden="true">5.</strong> ãƒ¢ãƒŠãƒ‰</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="monads/io.html"><strong aria-hidden="true">5.1.</strong> IO</a></li><li class="chapter-item expanded "><a href="monads/st.html"><strong aria-hidden="true">5.2.</strong> ST</a></li><li class="chapter-item expanded "><a href="monads/state.html"><strong aria-hidden="true">5.3.</strong> State</a></li></ol></li><li class="chapter-item expanded "><a href="algorithm/SUMMARY.html"><strong aria-hidden="true">6.</strong> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="algorithm/binary-search.html"><strong aria-hidden="true">6.1.</strong> 2 åˆ†æ¢ç´¢</a></li><li class="chapter-item expanded "><a href="algorithm/union-find.html"><strong aria-hidden="true">6.2.</strong> Union-Find</a></li><li class="chapter-item expanded "><a href="algorithm/segment-tree.html"><strong aria-hidden="true">6.3.</strong> ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨</a></li></ol></li><li class="chapter-item expanded "><a href="misc/SUMMARY.html"><strong aria-hidden="true">7.</strong> ãã®ä»–</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="misc/language-extensions.html"><strong aria-hidden="true">7.1.</strong> è¨€èªæ‹¡å¼µã«ã¤ã„ã¦</a></li><li class="chapter-item expanded "><a href="misc/curry.html"><strong aria-hidden="true">7.2.</strong> ã‚«ãƒªãƒ¼åŒ–ã«ã¤ã„ã¦</a></li><li class="chapter-item expanded "><a href="misc/point-free-style.html"><strong aria-hidden="true">7.3.</strong> ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«</a></li><li class="chapter-item expanded "><a href="misc/memes.html"><strong aria-hidden="true">7.4.</strong> å°ãƒã‚¿</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AtCoder in Haskell</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="å§‹ã‚ã«"><a class="header" href="#å§‹ã‚ã«">å§‹ã‚ã«</a></h1>
<p>Haskell ã§ AtCoder ã«å–ã‚Šçµ„ã‚€éš›ã®ãŠå½¹ç«‹ã¡æƒ…å ±ã‚’ãƒãƒ¼ãƒˆã—ã¦ã„ãã¾ã™ã€‚</p>
<p>1 å¹´å¾Œã«ã¯å……å®Ÿã—ãŸå†…å®¹ã«ãªã£ã¦ã„ã‚‹â€¦â€¦ã¯ãšï¼</p>
<blockquote>
<p>å†…å®¹ã¯èª¤ã‚Šã‚’å«ã‚€ã¨æ€ã„ã¾ã™ ğŸ™‡</p>
<p>ç‰¹ã«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ã¯ <strong>è‘—ã—ãä½ã‚¯ã‚ªãƒªãƒ†ã‚£</strong> ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŠæ°—ã‚’ã¤ã‘ãã ã•ã„ã€‚</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ›¸ç±"><a class="header" href="#æ›¸ç±">æ›¸ç±</a></h1>
<p>è‰¯ã‹ã£ãŸæœ¬ã®æ„Ÿæƒ³ã‚’è¿°ã¹ã¾ã™ã€‚</p>
<h2 id="ã™ã”ã„haskellãŸã®ã—ãå­¦ã¼ã†"><a class="header" href="#ã™ã”ã„haskellãŸã®ã—ãå­¦ã¼ã†"><a href="https://shop.ohmsha.co.jp/shopdetail/000000001926">ã™ã”ã„HaskellãŸã®ã—ãå­¦ã¼ã†ï¼</a></a></h2>
<p>æ–‡æ³•ã‚’ç¿’å¾—ã§ãã¾ã—ãŸã€‚ã€ã™ã”ã„ H æœ¬ã€ã¯ã€æœ€ã‚‚ç°¡å˜ã€ã¨è¨€ã‚ã‚Œã¾ã™ãŒã€ <code>Applicative</code> ãªã©ã¯ååˆ†é›£ã—ã„ã¨æ€ã„ã¾ã™ã€‚ã˜ã£ãã‚Šã¨ã€ã‚ã‚‹ã„ã¯é£›ã°ã—ãªãŒã‚‰èª­ã¿ã¾ã—ãŸã€‚</p>
<blockquote>
<p>ä¼¼ãŸä½ç½®ã®å…¥é–€æ›¸ã¨ã—ã¦ã¯ <a href="https://www.lambdanote.com/products/haskell">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° Haskell ç¬¬2ç‰ˆ</a> ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚å¥½è©•ã§ã™ã€‚</p>
</blockquote>
<p>èª­å¾Œã¯ <a href="https://atcoder.jp/contests/abs">AtCoder Beginners Selection</a> ãŒè§£ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ ABC (AtCoder Beginner Contest) ã«ã‚‚å‚åŠ ã—ã¦ã„ãã¾ã™ã€‚</p>
<h2 id="é›»å­ç‰ˆå˜ä½“haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°-ç¬¬2ç‰ˆ"><a class="header" href="#é›»å­ç‰ˆå˜ä½“haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°-ç¬¬2ç‰ˆ"><a href="https://booth.pm/ja/items/1577541">ã€é›»å­ç‰ˆå˜ä½“ã€‘Haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ç¬¬2ç‰ˆ</a></a></h2>
<p>ABC ã® B å•é¡Œã§ãƒªã‚¹ãƒˆã‚’ä½¿ã†ã¨ã—ã°ã—ã° <a href="https://atcoder.jp/contests/abc074/glossary?lang=ja">TLE</a> (å®Ÿè¡Œæ™‚é–“è¶…é) ã—ã¾ã™ã€‚ãã“ã§æœ¬æ›¸ã§ <code>vector</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ã„æ–¹ã‚’æŠ¼ã•ãˆã¾ã—ãŸã€‚æ­£ç¢ºè©•ä¾¡ã‚„ boxing ã«ã¤ã„ã¦ã‚‚æ•™ãˆã¦ãã‚Œã¦ã€éå¸¸ã«è‰¯ã‹ã£ãŸã§ã™ã€‚</p>
<blockquote>
<p>èª¬æ˜ã•ã‚Œã¦ã„ãªã„å†…å®¹ã¨ã—ã¦ã¯ã€ <code>Array</code> ã®åŸºæœ¬ã‚„é…å»¶è©•ä¾¡ã‚’ç”Ÿã‹ã—ãŸ DP ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p>
</blockquote>
<p>è‘—è€…ãƒ–ãƒ­ã‚°ã‚‚è‰¯ãã¦ã€ä¸€éƒ¨ãƒªãƒ³ã‚¯ã™ã‚‹ã¨:</p>
<ul>
<li><a href="https://blog.miz-ar.info/2019/09/techbookfest7-announce/">æŠ€è¡“æ›¸å…¸7ã«ã€Haskellã§ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚„ã‚‹æœ¬ã‚’å‡ºã—ã¾ã™</a></li>
<li><a href="https://blog.miz-ar.info/2016/06/writing-efficient-program-with-haskell/">Haskell ã§é«˜é€Ÿãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã¨ãã«æ³¨æ„ã™ã‚‹ã“ã¨</a></li>
<li><a href="https://blog.miz-ar.info/2019/05/atcoder-with-haskell/">Haskellã§AtCoderã«å‚æˆ¦ã—ã¦æ°´è‰²ã«ãªã£ãŸ</a></li>
<li><a href="https://blog.miz-ar.info/2019/07/atcoder-blue/">AtCoderã§é’è‰²ã«ãªã£ãŸ</a></li>
<li><a href="https://blog.miz-ar.info/2019/10/scanl-and-scanr/">Haskellã®scanç³»é–¢æ•°ã‚’ä½¿ã„ã“ãªã™</a></li>
<li><a href="https://blog.miz-ar.info/2018/01/debugging-haskell-program/">Haskell ã§ã®ãƒ‡ãƒãƒƒã‚°æ‰‹æ³•ã‚ã‚Œã“ã‚Œ</a></li>
<li><a href="https://blog.miz-ar.info/2020/08/debugging-with-quickcheck/">QuickCheckã§ç«¶ãƒ—ãƒ­ç”¨Haskellã‚³ãƒ¼ãƒ‰ã‚’ãƒ‡ãƒãƒƒã‚°ã™ã‚‹</a></li>
</ul>
<h2 id="ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡-ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åŠ›ã¨æ€è€ƒåŠ›ã‚’é«˜ã‚ã‚‹77ã®æŠ€è¡“"><a class="header" href="#ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡-ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åŠ›ã¨æ€è€ƒåŠ›ã‚’é«˜ã‚ã‚‹77ã®æŠ€è¡“"><a href="https://book.mynavi.jp/ec/products/detail/id=131288">ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡Â ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åŠ›ã¨æ€è€ƒåŠ›ã‚’é«˜ã‚ã‚‹77ã®æŠ€è¡“</a></a></h2>
<p>é›£åº¦èª¿æ•´ãŒçµ¶å¦™ãªå•é¡Œé›†ã§ã™ã€‚æ‰‹æ•°ã‚’å¢—ã‚„ã—ã¤ã¤å•é¡Œã‚’è§£ã„ã¦ã„ãã¾ã™ã€‚ã¤ã¾ã¥ã„ãŸæ™‚ã¯ <a href="https://haskell.jp/signin-slack.html">haskell-jp</a> ã§è³ªå•ã§ãã¾ã™ã€‚</p>
<p>ä½™è£•ãŒã‚ã‚Œã°ã€åŒè‘—è€…ã®ä½œæˆã—ãŸ <a href="https://atcoder.jp/contests/typical90">ç«¶ãƒ—ãƒ­å…¸å‹90å•</a> ãªã©ã«ã‚‚å–ã‚Šçµ„ã‚“ã§ã¿ã¾ã™ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç’°å¢ƒæ§‹ç¯‰"><a class="header" href="#ç’°å¢ƒæ§‹ç¯‰">ç’°å¢ƒæ§‹ç¯‰</a></h1>
<p>æœ€ä½é™ã€è¨€èªã‚µãƒ¼ãƒãŒå‹•ã„ã¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã§ãã‚‹ç’°å¢ƒãŒã»ã—ã„ã¨ã“ã‚ã§ã™ã€‚</p>
<h2 id="atcoder-ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ"><a class="header" href="#atcoder-ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ">AtCoder ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ</a></h2>
<p>Haskell ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ç›´ã—ãŸã‚Šã€å•é¡Œã®é›£åº¦ã‚’è¦–è¦šåŒ–ã§ãã¾ã™ã€‚</p>
<ul>
<li>
<p><a href="https://qiita.com/mod_poppo/items/af11f07169fa9bdab844">AtCoderã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ãƒã‚·ã«ã™ã‚‹UserScriptã‚’ä½œã£ãŸ</a><br />
å¤‰æ•°åã® <code>'</code> æ–‡å­—ãŒæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹å•é¡Œã‚’è§£æ¶ˆã§ãã¾ã™ã€‚</p>
</li>
<li>
<p><a href="https://scrapbox.io/magurofly/AtCoder%E3%82%92%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%80%81%E5%85%A5%E3%82%8C%E3%81%A6%E3%81%8A%E3%81%8F%E3%81%A8%E3%81%84%E3%81%84%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%AA%E3%81%A9">AtCoderã‚’ã™ã‚‹ã¨ãã€å…¥ã‚Œã¦ãŠãã¨ã„ã„æ‹¡å¼µæ©Ÿèƒ½ãªã©</a><br />
å•é¡Œãƒ»ãƒ¦ãƒ¼ã‚¶ã«æ¨å®šé›£åº¦ãƒ»ãƒ¬ãƒ¼ãƒˆã«å¿œã˜ãŸè‰²ãŒä»˜ãã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p>
</li>
</ul>
<h2 id="haskell-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦"><a class="header" href="#haskell-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦">Haskell ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦</a></h2>
<p><a href="https://atcoder.jp/contests/language-test-202001">Language Test 202001</a> ã§ AtCoder ã§ä½¿ã‚ã‚Œã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒç¢ºèªã§ãã¾ã™:</p>
<ul>
<li>GHC 8.8.3 (HLS 1.5.1)</li>
<li><a href="https://www.stackage.org/lts-16.11">lts-16.11</a> (<code>repa-3.4.1.4</code> ã®ã¿ <code>lts-16.11</code> å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)</li>
</ul>
<h2 id="haskell-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a class="header" href="#haskell-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">Haskell ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></h2>
<p>GHC (ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©) ã¨ <a href="setup/https//github.com/haskell/haskell-language-server">HLS</a> (è¨€èªã‚µãƒ¼ãƒ) ã¯ <a href="https://www.haskell.org/ghcup/">ghcup</a> ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™:</p>
<pre><code class="language-sh">$ ghcup install ghc 8.8.3
$ ghcup install hls 1.5.1
</code></pre>
<blockquote>
<p>ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚„ <code>stack</code> ã§ <code>ghc</code> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€ <code>ghcup</code> ã¨å¹²æ¸‰ã™ã‚‹ã‚‰ã—ã„ã§ã™ã€‚ <code>ghcup</code> ä»¥å¤–ã§å…¥ã‚ŒãŸ Haskell é–¢ä¿‚ã®ãƒ„ãƒ¼ãƒ«ã¯ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã®ãŒãŠã™ã™ã‚ã§ã™ã€‚</p>
</blockquote>
<h1 id="å‚è€ƒ"><a class="header" href="#å‚è€ƒ">å‚è€ƒ</a></h1>
<ul>
<li><a href="https://scrapbox.io/dragoon8192-main/AtCoder:Haskell%E3%81%AE%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83%E3%81%AE%E5%86%8D%E7%8F%BE">AtCoder:Haskellã®å®Ÿè¡Œç’°å¢ƒã®å†ç¾ - é›‘å¤šãªæ„Ÿã˜</a></li>
<li><a href="https://scrapbox.io/dragoon8192-main/Haskell_Language_Server">Haskell Language Server - é›‘å¤šãªæ„Ÿã˜</a></li>
<li><a href="https://haskell-language-server.readthedocs.io/en/latest/support/ghc-version-support.html">GHC version support - haskell language server documentation</a></li>
<li><a href="https://zenn.dev/mod_poppo/articles/haskell-setup-2023">Haskellã®ç’°å¢ƒæ§‹ç¯‰2023</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cli-ãƒ„ãƒ¼ãƒ«"><a class="header" href="#cli-ãƒ„ãƒ¼ãƒ«">CLI ãƒ„ãƒ¼ãƒ«</a></h1>
<p><code>acc</code> (<code>atcoder-cli</code>) ã§å•é¡Œã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒã§ãã¾ã™ã€‚ã¾ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆãƒ»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè¡ŒãŒã§ãã¾ã™ã€‚</p>
<ul>
<li><a href="http://tatamo.81.la/blog/2018/12/07/atcoder-cli-tutorial/">atcoder-cli ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« | ã‚ãŸã—ãƒ­ã‚°</a></li>
<li><a href="https://github.com/online-judge-tools/oj/blob/master/docs/getting-started.ja.md">Getting Started for oj command (æ—¥æœ¬èª)</a></li>
</ul>
<h2 id="acc-ã®ä½¿ã„æ–¹"><a class="header" href="#acc-ã®ä½¿ã„æ–¹"><code>acc</code> ã®ä½¿ã„æ–¹</a></h2>
<p>å‚è€ƒ: <a href="https://github.com/toyboot4e/abc-hs">åƒ•ã® ABC ãƒªãƒã‚¸ãƒˆãƒª</a></p>
<h3 id="å•é¡Œã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"><a class="header" href="#å•é¡Œã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">å•é¡Œã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a></h3>
<p>TODO</p>
<h3 id="ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ"><a class="header" href="#ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ">ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ</a></h3>
<p>TODO</p>
<h2 id="oj-ã®ä½¿ã„æ–¹"><a class="header" href="#oj-ã®ä½¿ã„æ–¹"><code>oj</code> ã®ä½¿ã„æ–¹</a></h2>
<h3 id="ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’-test-cases-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚Œã‚‹æ–¹æ³•"><a class="header" href="#ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’-test-cases-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚Œã‚‹æ–¹æ³•">ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ <code>test-cases/</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚Œã‚‹æ–¹æ³•</a></h3>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ"><a class="header" href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</a></h1>
<p>HLS ãŒå‹•ã Stack ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚ã¾ãŸã™ã¹ã¦ã® <code>Main.hs</code> ã¯ stack script ã§ã™ã€‚</p>
<blockquote>
<p><strong>ã€æ­£ã—ã„ã€æ§‹æˆã§ã¯ãªã„</strong> ã¨æ€ã„ã¾ã™ãŒã€ä¸€å¿œå‹•ãã®ã§è¼‰ã›ã¦ãŠãã¾ã™ã€‚</p>
</blockquote>
<h2 id="ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ"><a class="header" href="#ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ">ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ</a></h2>
<p>åƒ•ã¯ä»¥ä¸‹ã‚’ä½¿ã£ã¦ã„ã¾ã™:</p>
<pre><code class="language-sh">abc-hs/
â”œâ”€â”€ .git/
â”œâ”€â”€ abc278/
â””â”€â”€ abc279/ # å‚åŠ ã‚³ãƒ³ãƒ†ã‚¹ãƒˆæ¯ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
    â”œâ”€â”€ .projectile      # â€»
    â”œâ”€â”€ abc279.cabal     # è‡ªå‹•ç”Ÿæˆ
    â”œâ”€â”€ hie.yaml         # `gen-hie` ã§ç”Ÿæˆ
    â”œâ”€â”€ package.yaml     # ç·¨é›†å¯¾è±¡
    â”œâ”€â”€ stack.yaml       # ç·¨é›†å¯¾è±¡
    â””â”€â”€ stack.yaml.lock  # è‡ªå‹•ç”Ÿæˆ
</code></pre>
<blockquote>
<p>â€» Emacs ã§ã¯ LSP workspace ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ <code>abc-hs/</code> ã«ãªã£ãŸãŸã‚ã€ä»•æ–¹ãªã <code>.projectile</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ <code>abc279/</code> ãªã©ãŒãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚ã‚‹ã¨ Emacs ã«ä¼ãˆã¦ã„ã¾ã™ã€‚</p>
</blockquote>
<h2 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®-ghc-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ"><a class="header" href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®-ghc-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã® GHC ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ</a></h2>
<p>åƒ•ã¯ <code>stack.yaml</code> ã§ <code>system-ghc: true</code> (å¾Œè¿°) ã‚’è¨­å®šã—ã€ <a href="https://direnv.net/">direnv</a> ã§ <code>PATH</code> ã‚’æ›¸ãæ›ãˆã¦ GHC / HLS ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚é–“ã«åˆã‚ã›ã¨ã—ã¦ã¯ååˆ†ãªã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹â€¦â€¦ã€‚</p>
<h2 id="stackyaml"><a class="header" href="#stackyaml"><code>stack.yaml</code></a></h2>
<p>Stack ã«ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸‹ã® <code>.stack-work/</code> ã« GHC ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ•°ã ã‘ GHC ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã¯ç„¡é§„ã§ã™ã€‚ <code>PATH</code> ä¸­ã® GHC ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã« <code>system-ghc: true</code> ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã¾ãŸ AtCoder ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™:</p>
<pre><code class="language-yaml">system-ghc: true
resolver: lts-16.11
packages:
- .
extra-deps:
- repa-3.4.1.4
</code></pre>
<blockquote>
<p>ä¸»ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ <a href="https://www.stackage.org/lts-16.11">lts-16.11</a> ã«å«ã¾ã‚Œã¾ã™ãŒã€ <code>repa-3.4.1.4</code> ã®ã¿ä¾‹å¤–ã§ã™ã€‚</p>
</blockquote>
<h2 id="packageyaml"><a class="header" href="#packageyaml"><code>package.yaml</code></a></h2>
<p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ (HLS ã§ä½¿ç”¨ã•ã‚Œã‚‹) è­¦å‘Šã®ãƒ¬ãƒ™ãƒ«ã€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã‚’è¨­å®šã—ã¾ã™:</p>
<details>
<summary><code>package.yaml</code></summary>
<pre><code class="language-yaml">dependencies:
   - base &gt;= 4.7 &amp;&amp; &lt; 5

   - QuickCheck
   - array
   - attoparsec
   - bytestring
   - containers
   - deepseq
   - extra
   - fgl
   - hashable
   - heaps
   - integer-logarithms
   - lens
   - massiv
   - mono-traversable
   - mtl
   - mutable-containers
   - mwc-random
   - parallel
   - parsec
   - primitive
   - psqueues
   - random
   - reflection
   - repa
   - template-haskell
   - text
   - tf-random
   - transformers
   - unboxing-vector
   - unordered-containers
   - utility-ht
   - vector
   - vector-algorithms
   - vector-th-unbox

# DRY for package.yaml executables:
# &lt;https://www.reddit.com/r/haskell/comments/haeqin/dry_for_packageyaml_executables/&gt;
_exe-defs: &amp;exe-defaults
  # dependencies:
  # - abs
  ghc-options:
    - -threaded
    - -rtsopts
    - -with-rtsopts=-N
    - -Wall # all warnings
  other-modules: []

# REMARK: See `README` for the langauge server support.
executables:
  a-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: a
    main:                Main.hs

  b-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: b
    main:                Main.hs

  c-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: c
    main:                Main.hs

  d-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: d
    main:                Main.hs

  e-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: e
    main:                Main.hs

  f-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: f
    main:                Main.hs

  g-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: g
    main:                Main.hs

  ex-exe:
    &lt;&lt;: *exe-defaults
    source-dirs: ex
    main:                Main.hs
</code></pre>
</details>
<p><code>executables</code> ã‚’çœãã¨ HLS å‹•ä½œãŒä¸å®‰å®šã«ãªã£ãŸ (å‹•ã„ãŸã‚Šå‹•ã‹ãªã‹ã£ãŸã‚Šã™ã‚‹) ãŸã‚ã€æ›¸ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="hieyaml"><a class="header" href="#hieyaml"><code>hie.yaml</code></a></h2>
<p><code>package.yaml</code> ã‚’æ›¸ã„ãŸå¾Œã€ <code>gen-hie</code> (<a href="https://github.com/Avi-D-coder/implicit-hie#readme">implicit-hie</a>) ã‚’ä½¿ã£ã¦ <code>hie.yaml</code> ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚ŒãŒç„¡ã„ã¨ HLS ãŒæ­£å¸¸ã«å‹•ãã¾ã›ã‚“ã§ã—ãŸ:</p>
<pre><code class="language-sh">$ gen-hie &gt; hie.yaml
</code></pre>
<details>
<summary><code>hie.yaml</code></summary>
<pre><code class="language-yaml">cradle:
  stack:
    - path: &quot;./a/Main.hs&quot;
      component: &quot;abc279:exe:a-exe&quot;

    - path: &quot;./b/Main.hs&quot;
      component: &quot;abc279:exe:b-exe&quot;

    - path: &quot;./c/Main.hs&quot;
      component: &quot;abc279:exe:c-exe&quot;

    - path: &quot;./d/Main.hs&quot;
      component: &quot;abc279:exe:d-exe&quot;

    - path: &quot;./e/Main.hs&quot;
      component: &quot;abc279:exe:e-exe&quot;

    - path: &quot;./ex/Main.hs&quot;
      component: &quot;abc279:exe:ex-exe&quot;

    - path: &quot;./f/Main.hs&quot;
      component: &quot;abc279:exe:f-exe&quot;

    - path: &quot;./g/Main.hs&quot;
      component: &quot;abc279:exe:g-exe&quot;
</code></pre>
<blockquote>
<p><code>abc279</code> ã®éƒ¨åˆ†ã¯ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã«ãªã‚Šã¾ã™ã€‚</p>
</blockquote>
</details>
<h2 id="haskell-ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"><a class="header" href="#haskell-ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ">Haskell ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a></h2>
<h3 id="stack-script"><a class="header" href="#stack-script">Stack script</a></h3>
<p>åƒ•ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã„ã¾ã™:</p>
<pre><code class="language-hs">#!/usr/bin/env stack
{- stack script --resolver lts-16.11
--package array --package bytestring --package containers
--package vector --package vector-algorithms --package primitive --package transformers
-}

{- ORMOLU_DISABLE -}
{-# LANGUAGE BangPatterns, BlockArguments, LambdaCase, MultiWayIf, PatternGuards, TupleSections #-}
{-# LANGUAGE NumDecimals, NumericUnderscores #-}
{-# LANGUAGE FlexibleInstances, MultiParamTypeClasses, ScopedTypeVariables, TypeApplications #-}
{-# LANGUAGE TypeFamilies #-}
{- ORMOLU_ENABLE -}

-- é–¢æ•°ãªã©
</code></pre>
<p><code>Main.hs</code> ã‚’ <a href="https://zenn.dev/mod_poppo/articles/haskell-script">cabel script / stack script</a> ã«ã™ã‚‹ã¨ã€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ç’°å¢ƒæ§‹ç¯‰ãŒæ¥½ãªåé¢ã€ stack script ã®å®Ÿè¡Œé€Ÿåº¦ã¯ <code>oj</code> ã«ã‚ˆã‚‹ã¨ 1 ç§’ã‚’è¶…ãˆã‚‹ãŸã‚ã€å®Ÿè¡Œæ™‚é–“ã®æ­£ç¢ºãªè¦‹ç©ã‚‚ã‚ŠãŒã§ããªããªã‚‹ã®ãŒæ¬ ç‚¹ã§ã™ã€‚</p>
<p><code>stack</code> ã§ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œã™ã‚‹ç’°å¢ƒã‚’ä½œã£ãŸæ–¹ãŒè‰¯ã„ã¨ã¯æ€ã†ã®ã§ã™ãŒâ€¦â€¦</p>
<h3 id="stack-script-ã®é–¢æ•°ã‚’-repl-ã‹ã‚‰å‘¼ã¶"><a class="header" href="#stack-script-ã®é–¢æ•°ã‚’-repl-ã‹ã‚‰å‘¼ã¶">Stack script ã®é–¢æ•°ã‚’ REPL ã‹ã‚‰å‘¼ã¶</a></h3>
<p>ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã€ <code>Main.hs</code> ã®é–¢æ•°ã‚’ REPL ã‹ã‚‰å‹•ä½œç¢ºèªã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
<p><code>ghci</code> ã‹ã‚‰ <code>:load</code> ã™ã‚‹ã¨ã‚³ãƒ¡ãƒ³ãƒˆãŒç„¡è¦–ã•ã‚Œã‚‹ãŸã‚ã€ Stackage ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® <code>import</code> ã«å¤±æ•—ã—ã¾ã™ã€‚ä»£ã‚ã‚Šã« <code>stack repl &lt;file&gt;</code> ã§ stack script ã‚’ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™:</p>
<pre><code>$ stack repl a/Main.hs
Package name not specified, inferred &quot;abc279&quot;
Using configuration for abc279:exe:a-exe to load /path/to/abc279/a/Main.hs
Using main module: 1. Package `abc279' component abc279:exe:a-exe with main-is file: /path/to/abc-hs/abc279/a/Main.hs
Building all executables for `abc279' once. After a successful build of all of them, only specified executables will be rebuilt.
abc279&gt; initial-build-steps (exe)
The following GHC options are incompatible with GHCi and have not been passed to it: -threaded
Configuring GHCi with the following packages: abc279
GHCi, version 8.8.3: https://www.haskell.org/ghc/  :? for help
[1 of 1] Compiling Main             ( /path/to/abc-hs/abc279/a/Main.hs, interpreted )

&lt;ä¸­ç•¥ è­¦å‘Šãªã©&gt;

Ok, one module loaded.
Loaded GHCi configuration from /private/var/folders/w1/gylc7bkj22z1wxrwkdk6jg040000gr/T/haskell-stack-ghci/3a2d78e8/ghci-script
*Main&gt;
</code></pre>
<p>ã‚ã‚‹ã„ã¯ <code>stack repl</code> ã¨ã ã‘æ‰“ã¤ã¨ã€èµ·å‹•æ™‚ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã¾ã™:</p>
<pre><code>$ stack repl
Package name not specified, inferred &quot;abc279&quot;

* * * * * * * *
The main module to load is ambiguous. Candidates are:
1. Package `abc279' component abc279:exe:a-exe with main-is file: /path/to/abc-hs/abc279/a/Main.hs
2. Package `abc279' component abc279:exe:b-exe with main-is file: /path/to/abc-hs/abc279/b/Main.hs
3. Package `abc279' component abc279:exe:c-exe with main-is file: /path/to/abc-hs/abc279/c/Main.hs
4. Package `abc279' component abc279:exe:d-exe with main-is file: /path/to/abc-hs/abc279/d/Main.hs
5. Package `abc279' component abc279:exe:e-exe with main-is file: /path/to/abc-hs/abc279/e/Main.hs
6. Package `abc279' component abc279:exe:ex-exe with main-is file:/path/tos/abc-hs/abc279/ex/Main.hs
7. Package `abc279' component abc279:exe:f-exe with main-is file: /path/to/abc-hs/abc279/f/Main.hs
8. Package `abc279' component abc279:exe:g-exe with main-is file: /path/to/abc-hs/abc279/g/Main.hs
You can specify which one to pick by:
 * Specifying targets to stack ghci e.g. stack ghci abc279:exe:a-exe
 * Specifying what the main is e.g. stack ghci --main-is abc279:exe:a-exe
 * Choosing from the candidate above [1..8]
* * * * * * * *

Specify main module to use (press enter to load none): 1
Loading main module from candidate 1, --main-is /path/to/abc279/a/Main.hs

Building all executables for `abc279' once. After a successful build of all of them, only specified executables will be rebuilt.
abc279&gt; initial-build-steps (exe)
The following GHC options are incompatible with GHCi and have not been passed to it: -threaded
Configuring GHCi with the following packages: abc279
GHCi, version 8.8.3: https://www.haskell.org/ghc/  :? for help
[1 of 1] Compiling Main             ( /path/to/abc279/a/Main.hs, interpreted )

&lt;ä¸­ç•¥ è­¦å‘Šãªã©&gt;

Ok, one module loaded.
Loaded GHCi configuration from /private/var/folders/w1/gylc7bkj22z1wxrwkdk6jg040000gr/T/haskell-stack-ghci/d02d2a00/ghci-script
*Main&gt;
</code></pre>
<blockquote>
<p>TODO: ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°ãŒã‚ã£ãŸå ´åˆã€ <code>:load</code> ã§ã¯ <code>--resolver</code> ãªã©ã®ã‚³ãƒ¡ãƒ³ãƒˆã®æ›´æ–°ã«å¯¾å¿œã§ããªã„æ°—ãŒã—ã¾ã™ãŒâ€¦â€¦</p>
</blockquote>
<h2 id="å‚è€ƒ-1"><a class="header" href="#å‚è€ƒ-1">å‚è€ƒ</a></h2>
<ul>
<li><a href="https://zenn.dev/mod_poppo/articles/haskell-without-project">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‰ãšã«Haskellã‚’ã‚„ã‚‹</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ãƒ©ã‚¤ãƒ–ãƒ©ãƒª"><a class="header" href="#ãƒ©ã‚¤ãƒ–ãƒ©ãƒª">ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a></h1>
<p>ä¸»ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç«‹ã¡ä½ç½®ãƒ»ä½¿ã„æ–¹ãªã©ã‚’ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
<h2 id="ãƒãƒ¼ã‚¸ãƒ§ãƒ³"><a class="header" href="#ãƒãƒ¼ã‚¸ãƒ§ãƒ³">ãƒãƒ¼ã‚¸ãƒ§ãƒ³</a></h2>
<p><a href="https://atcoder.jp/contests/language-test-202001">Language Test 202001</a> ã§ AtCoder ã§ä½¿ã‚ã‚Œã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒç¢ºèªã§ãã¾ã™ã€‚å†æ²ã™ã‚‹ã¨:</p>
<ul>
<li>GHC 8.8.3 (HLS 1.5.1)</li>
<li>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ <a href="https://www.stackage.org/lts-16.11">lts-16.11</a> (<code>repa-3.4.1.4</code> ã®ã¿ <code>lts-16.11</code> å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)</li>
</ul>
<h2 id="å‚è€ƒ-2"><a class="header" href="#å‚è€ƒ-2">å‚è€ƒ</a></h2>
<ul>
<li><a href="https://booth.pm/ja/items/1577541">ã€é›»å­ç‰ˆå˜ä½“ã€‘Haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ç¬¬2ç‰ˆ</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="array"><a class="header" href="#array">array</a></h1>
<p><code>Array</code> ã¯ä¸»ã«å¤šæ¬¡å…ƒé…åˆ—ã®è¡¨ç¾ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p>
<h2 id="array-ã¨-vector-ã®ä½¿ã„åˆ†ã‘"><a class="header" href="#array-ã¨-vector-ã®ä½¿ã„åˆ†ã‘"><code>Array</code> ã¨ <code>Vector</code> ã®ä½¿ã„åˆ†ã‘</a></h2>
<p>1 æ¬¡å…ƒé…åˆ—ã®å ´åˆã¯ <code>Vector</code> ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ (API ãŒãƒªãƒƒãƒãŸã‚) ã€‚ <code>Array</code> ã«ã¯æ·»å­—ã‚¢ã‚¯ã‚»ã‚¹ä»¥å¤–ã® API ãŒã»ã¼ã‚ã‚Šã¾ã›ã‚“ãŒã€ <a href="http://zvon.org/other/haskell/Outputarray/accumArray_f.html">accumArray</a> ãŒãƒãƒã‚‹å ´åˆã¯ <code>Array</code> ã‚’ä½¿ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<p>2 æ¬¡å…ƒé…åˆ—ã®å ´åˆã¯ <code>Array</code> ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™:</p>
<ul>
<li>2 æ¬¡å…ƒã®å¯å¤‰é…åˆ—ã¯ <code>Array</code> ã§ã—ã‹è¡¨ç¾ã§ããªã„æ°—ãŒã—ã¾ã™ (?)</li>
<li>2 æ¬¡å…ƒã®ä¸å¤‰é…åˆ—ã‚‚ <code>Array</code> ã®æ–¹ãŒæ·»å­—ã‚¢ã‚¯ã‚»ã‚¹ãŒç¶ºéº—ã«ãªã‚Šã¾ã™:
<ul>
<li><code>arr ! (y, x)</code></li>
<li><code>vec VU.! (x + y * w)</code></li>
</ul>
</li>
</ul>
<h2 id="class-ix"><a class="header" href="#class-ix"><code>class Ix</code></a></h2>
<p><code>array</code> ã®æ·»å­—ã¯ <a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã‚¯ãƒ©ã‚¹ã§æŠ½è±¡ã•ã‚Œã¦ã„ã¾ã™ã€‚ <a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã‚’çŸ¥ã‚‹ã“ã¨ã§ <code>Array</code> ã® API ãŒç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã¯ <code>Int</code> ã‚„ <code>Char</code> ãªã©ã«å¯¾ã—ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ã¾ãŸ n æ¬¡å…ƒã«æ‹¡å¼µã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<h3 id="ix-ã®ä½¿ã„æ–¹-1-æ¬¡å…ƒ"><a class="header" href="#ix-ã®ä½¿ã„æ–¹-1-æ¬¡å…ƒ"><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã®ä½¿ã„æ–¹ (1 æ¬¡å…ƒ)</a></h3>
<p><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚ã¾ãšã¯ REPL ã‚’èµ·å‹•ã—ã¾ã™:</p>
<pre><code class="language-sh">$ ghci
Prelude&gt; import Data.Ix
Prelude Data.Ix&gt;
</code></pre>
<p><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã‚¯ãƒ©ã‚¹ã® <code>index</code> é–¢æ•°ã¯ã€æ·»å­—ç¯„å›² \([x1, x2]\) ã«å¯¾ã™ã‚‹ç›¸å¯¾ä½ç½®ã‚’è¿”ã—ã¾ã™:</p>
<pre><code class="language-hs">Prelude Data.Ix&gt; index (0, 4) 2
2
Prelude Data.Ix&gt; index (2, 6) 2
0
</code></pre>
<h3 id="ix-ã®ä½¿ã„æ–¹-2-æ¬¡å…ƒ"><a class="header" href="#ix-ã®ä½¿ã„æ–¹-2-æ¬¡å…ƒ"><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã®ä½¿ã„æ–¹ (2 æ¬¡å…ƒ)</a></h3>
<p><a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Ix.html">Ix</a> ã¯ n æ¬¡å…ƒã«æ‹¡å¼µã•ã‚Œã¦ãŠã‚Šã€ 2 æ¬¡å…ƒã®æ·»å­—ã‚‚è¡¨ç¾ã§ãã¾ã™:</p>
<pre><code class="language-hs">Prelude Data.Ix&gt; index ((0, 0), (5, 5)) (0, 1)
1
Prelude Data.Ix&gt; index ((0, 0), (5, 5)) (1, 0)
6
Prelude Data.Ix&gt; index ((0, 0), (5, 5)) (5, 5)
36
</code></pre>
<p>æ³¨æ„ã™ã¹ããªã®ã¯ã€ã‚¿ãƒ—ãƒ«ã®å³ç«¯ã®å€¤ãŒ 1 æ¬¡å…ƒç›®ã‚’è¡¨ã™ã¨ã„ã†ã“ã¨ã§ã™ã€‚ Row-major ãªè¡Œåˆ—ã®å ´åˆã¯ã€ <code>Array</code> ç”Ÿæˆæ™‚ã®ã‚µã‚¤ã‚ºã¯ <code>(h, w)</code> ã§ã‚ã‚Šã€ <code>Array</code> ã¸ã®æ·»å­—ã‚¢ã‚¯ã‚»ã‚¹ã«ã¯ <code>(y, x)</code> (ã™ãªã‚ã¡ <code>(row, column)</code> ) ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<h2 id="immutable-array"><a class="header" href="#immutable-array">Immutable array</a></h2>
<h3 id="accumarray-ã§ç”Ÿæˆ"><a class="header" href="#accumarray-ã§ç”Ÿæˆ"><code>accumArray</code> ã§ç”Ÿæˆ</a></h3>
<p><a href="http://zvon.org/other/haskell/Outputarray/accumArray_f.html">accumArray</a> ã¯é…åˆ—ã¸ã®ç•³ã¿è¾¼ã¿ã§ã™ã€‚ä½¿ã„æ–¹ã¯ãƒªãƒ³ã‚¯å…ˆã®é€šã‚Š:</p>
<pre><code class="language-hs">Prelude&gt; import Data.Array
Prelude Data.Array&gt; accumArray (+) 0 (1, 3) [(1, -1), (2, 1), (2, 2), (3, 5)]
--                             ~~~ ~  ~~~~    ~~~~
--                             |   |  |       |
--                             |   |  |       +--- (æ·»å­— 1, æ·»å­— 1 ã«å¯¾ã™ã‚‹å…¥åŠ› -1)
--                             |   |  +--- æ·»å­—ç¯„å›² = [1, 3]
--                             |   +--- åˆæœŸã®è“„ç©å€¤ = 0
--                             +--- (\è“„ç©å€¤ å…¥åŠ› -&gt; æ–°ã—ã„è“„ç©å€¤)
array (1,3) [(1,-1),(2,3),(3,5)]
</code></pre>
<h2 id="mutable-array"><a class="header" href="#mutable-array">Mutable array</a></h2>
<h3 id="st-ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ"><a class="header" href="#st-ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ">ST ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ</a></h3>
<ul>
<li><a href="https://www.stackage.org/haddock/lts-20.1/array-0.5.4.0/Data-Array-ST.html#t:STUArray">runSTArray</a></li>
<li><a href="https://www.stackage.org/haddock/lts-20.1/array-0.5.4.0/Data-Array-ST.html#v:runSTUArray">runSTUArray</a></li>
</ul>
<p>TODO</p>
<h3 id="io-ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ"><a class="header" href="#io-ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ">IO ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸé…åˆ—æ“ä½œ</a></h3>
<p>TODO</p>
<h3 id="accumarray-ã‹ã‚‰ã®-thaw-è§£å‡"><a class="header" href="#accumarray-ã‹ã‚‰ã®-thaw-è§£å‡"><code>accumArray</code> ã‹ã‚‰ã® <code>thaw</code> (è§£å‡)</a></h3>
<p>TODO</p>
<h2 id="æ³¨æ„ç‚¹"><a class="header" href="#æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</a></h2>
<h3 id="ã‚¿ãƒ—ãƒ«ã®-array-ã«ã¯-boxed-array-ã‚’ä½¿ã‚ã–ã‚‹ã‚’å¾—ãªã„"><a class="header" href="#ã‚¿ãƒ—ãƒ«ã®-array-ã«ã¯-boxed-array-ã‚’ä½¿ã‚ã–ã‚‹ã‚’å¾—ãªã„">ã‚¿ãƒ—ãƒ«ã® array ã«ã¯ boxed array ã‚’ä½¿ã‚ã–ã‚‹ã‚’å¾—ãªã„</a></h3>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bytestring"><a class="header" href="#bytestring">bytestring</a></h1>
<p><code>ByteString</code> ãŠã‚ˆã³ <code>ByteStringBuilder</code> ã¯é«˜é€Ÿãªãƒ†ã‚­ã‚¹ãƒˆå‡¦ç† (ASCII é™å®š) ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p>
<p>è©³ã—ãã¯ <a href="https://booth.pm/ja/items/1577541">ã€é›»å­ç‰ˆå˜ä½“ã€‘Haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ç¬¬2ç‰ˆ</a> ç¬¬ 1 ç« ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="ä¸»ãª-api"><a class="header" href="#ä¸»ãª-api">ä¸»ãª API</a></h2>
<ul>
<li>ç©ºæ–‡å­—: <code>mzero @ BSB.Builder</code> (ã ã£ã‘ï¼Ÿ)</li>
<li>é€£çµ: <code>&lt;&gt;</code>, <code>mconcat</code></li>
<li>å¤‰æ›: <code>BSB.intDec</code>, <code>BSB.charUtf8</code>, <code>BSB.stringUtf8</code></li>
<li>å‡ºåŠ›: <code>hPutBuilder stdout bs</code></li>
</ul>
<h2 id="ä¾‹"><a class="header" href="#ä¾‹">ä¾‹</a></h2>
<p>TODO: fold</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="containers"><a class="header" href="#containers">containers</a></h1>
<p><code>IntSet</code>, <code>IntMap</code> ã¯é †åºä»˜ã‘ã‚‰ã‚ŒãŸæœ¨ã§ã™ï¼Ÿã€€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å‰Šæ¸›ã§é‡å®ã—ã¾ã™ã€‚æ¤œç´¢ãŒé€Ÿã„ (\(O(log N)\)) ã®ã‚‚éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚</p>
<h2 id="immutable-ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§å¤§ä¸ˆå¤«"><a class="header" href="#immutable-ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§å¤§ä¸ˆå¤«">Immutable ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§å¤§ä¸ˆå¤«ï¼Ÿ</a></h2>
<p>æ›´æ–°ã«å¤šå°‘ã®æ™‚é–“ (\(O(log N)\)) ãŒå¿…è¦ã§ã™ãŒã€ä»Šã®ã¨ã“ã‚ TLE ã™ã‚‹ã»ã©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒä¸ŠãŒã‚‹ã¨ã€åˆ¥ã®å®Ÿè£…ã«åˆ‡ã‚Šæ›¿ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<h2 id="ä¾‹-1"><a class="header" href="#ä¾‹-1">ä¾‹</a></h2>
<p>TODO: DFS?</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vector"><a class="header" href="#vector">vector</a></h1>
<p><code>Vector</code> ã¯é«˜åŠ¹ç‡ãªé…åˆ—ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚ <code>Array</code> ã¨æ¯”ã¹ã¦ API ãŒè±Šã‹ãªãŸã‚ã€åŸºæœ¬çš„ã«ã¯ <code>Vector</code> ãŒå¥½ã¾ã‚Œã¾ã™ãŒã€ 2 æ¬¡å…ƒé…åˆ—ã®è¡¨ç¾ã«ã¯å¼±ã„ã§ã™ã€‚ä½¿ã„åˆ†ã‘ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚</p>
<h2 id="ä¸»ãªä½¿ã„æ–¹"><a class="header" href="#ä¸»ãªä½¿ã„æ–¹">ä¸»ãªä½¿ã„æ–¹</a></h2>
<p>åŸºæœ¬çš„ã«æ·»å­—ã‚¢ã‚¯ã‚»ã‚¹ãŒ \(O(1)\) ãªãƒªã‚¹ãƒˆã®ã‚ˆã†ã«æ‰±ãˆã¾ã™ã€‚ãƒ‘ã‚¿ãƒ³ãƒãƒƒãƒãŒã§ããªãã¦æˆ¸æƒ‘ã„ã¾ã™ãŒã€å¤§åŠã®æ“ä½œã¯é«˜éšé–¢æ•°ã§å®Ÿç¾ã§ãã¾ã™ã—ã€é«˜éšé–¢æ•°ã‚’ä½¿ã£ãŸæ–¹ãŒåŠ¹ç‡ã®è‰¯ã„ã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã«å¯¾å¿œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚‚ã€é«˜éšé–¢æ•°ã‚„ <code>do</code> è¨˜æ³•ã§è¡¨ç¾ã§ãã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p>
<p>è©³ã—ãã¯ <a href="https://booth.pm/ja/items/1577541">ã€é›»å­ç‰ˆå˜ä½“ã€‘Haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ç¬¬2ç‰ˆ</a> ç¬¬ 4 ç« ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="ãƒãƒ¼ãƒˆ"><a class="header" href="#ãƒãƒ¼ãƒˆ">ãƒãƒ¼ãƒˆ</a></h2>
<h3 id="stream-fusion"><a class="header" href="#stream-fusion">Stream fusion</a></h3>
<p>TODO: ãƒªã‚¹ãƒˆã¨ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ (å·®ã¯ç„¡ã„ï¼Ÿ)</p>
<h3 id="primmonad-ã‚„-inline-é–¢æ•°"><a class="header" href="#primmonad-ã‚„-inline-é–¢æ•°"><code>PrimMonad</code> ã‚„ <code>INLINE</code> é–¢æ•°</a></h3>
<p>TODO:</p>
<h3 id="vector-ã§-2-æ¬¡å…ƒé…åˆ—ã‚’è¡¨ç¾ã™ã‚‹ã«ã¯"><a class="header" href="#vector-ã§-2-æ¬¡å…ƒé…åˆ—ã‚’è¡¨ç¾ã™ã‚‹ã«ã¯"><code>Vector</code> ã§ 2 æ¬¡å…ƒé…åˆ—ã‚’è¡¨ç¾ã™ã‚‹ã«ã¯</a></h3>
<p>ä¸å¤‰é…åˆ—ãªã‚‰ <code>V.Vector (VU.Vector a)</code> ãŒä½¿ãˆã¾ã™ã€‚ãŸã¾ãƒ¼ã«å…¥åŠ›ã®å‡¦ç†ã§å½¹ç«‹ã¡ã¾ã™ã€‚</p>
<p>å¯å¤‰é…åˆ—ãªã‚‰ <code>Array</code> ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<h3 id="ã‚¿ãƒ—ãƒ«ã«å¯¾ã™ã‚‹å®Ÿè£…"><a class="header" href="#ã‚¿ãƒ—ãƒ«ã«å¯¾ã™ã‚‹å®Ÿè£…">ã‚¿ãƒ—ãƒ«ã«å¯¾ã™ã‚‹å®Ÿè£…</a></h3>
<p>ãªã‚“ã¨å†…éƒ¨å®Ÿè£…ã¨ã—ã¦ã¯ 2 æœ¬ã®é…åˆ—ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚</p>
<p>TODO: Struct of Arrays, ãƒ‡ãƒ¼ã‚¿æ—ï¼Ÿ</p>
<h3 id="resizable-ãª-mvector"><a class="header" href="#resizable-ãª-mvector">Resizable ãª <code>MVector</code></a></h3>
<p>TODO: å®Ÿè£…ä¾‹ã¸ã®ãƒªãƒ³ã‚¯ï¼Ÿ</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vector-algorithms"><a class="header" href="#vector-algorithms">vector-algorithms</a></h1>
<p><code>vector-algorithms</code> ã¯å¯å¤‰é…åˆ—ã«å¯¾ã™ã‚‹ã‚½ãƒ¼ãƒˆã‚„æ¤œç´¢ã‚’æä¾›ã—ã¾ã™ã€‚</p>
<p>ä¸å¤‰é…åˆ—ã«å¯¾ã—ã¦ã‚‚é©ç”¨ã§ãã¾ã™:</p>
<ul>
<li>
<p><a href="https://www.stackage.org/haddock/lts-16.11/vector-0.12.1.2/Data-Vector-Unboxed.html#v:modify">VU.modify</a><br />
<code>VU.Vector</code> ã‚’ä¸€æ™‚çš„ã« <code>VUM.Vector</code> ã«å¤‰ãˆã¦æ“ä½œã‚’é©ç”¨ã—ã€å†ã³ <code>VU.Vector</code> ã«å‡çµã—ã¾ã™ã€‚</p>
</li>
<li>
<p><a href="https://www.stackage.org/haddock/lts-16.11/vector-0.12.1.2/Data-Vector-Unboxed.html#v:thaw">VU.thaw</a> (è§£å‡)<br />
<code>VU.Vector</code> ã‚’ <code>VUM.Vector</code> ã«å¤‰ãˆã¾ã™ã€‚</p>
</li>
</ul>
<blockquote>
<p><a href="https://www.stackage.org/haddock/lts-16.11/vector-0.12.1.2/Data-Vector-Unboxed.html#v:modify"><code>VU.modify</code></a> ã¯ <a href="https://www.stackage.org/haddock/lts-16.11/vector-0.12.1.2/Data-Vector-Unboxed-Mutable.html#v:modify"><code>VUM.modify</code></a> ã¨ã¯ã¾ã£ãŸãåˆ¥ç‰©ã§ã™ã€‚</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="primitive"><a class="header" href="#primitive">primitive</a></h1>
<p><code>primitive</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® <code>PrimMonad</code> ã¯ã€ <code>IO</code> ãŠã‚ˆã³ <code>ST</code> ã‚’æŠ½è±¡ã—ã¾ã™ã€‚ <code>vector</code> ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€æ™‚ãªã©ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p>
<p>è©³ã—ãã¯ <a href="https://booth.pm/ja/items/1577541">ã€é›»å­ç‰ˆå˜ä½“ã€‘Haskellã§æˆ¦ã†ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ç¬¬2ç‰ˆ</a> ç¬¬ 4 ç« ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="todo-ä½¿ç”¨ä¾‹"><a class="header" href="#todo-ä½¿ç”¨ä¾‹">TODO: ä½¿ç”¨ä¾‹</a></h2>
<p>Union-Find æœ¨ã‚’ Find æœ¨ã«å›ºã‚ã¦ã—ã¾ã†ï¼Ÿ</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="text"><a class="header" href="#text">text</a></h1>
<p><code>text</code> ã¯ Unicode æ–‡å­— (?) ãŒæ‰±ãˆã‚‹æ–‡å­—åˆ—ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã¯ã‚ã¾ã‚Šä½¿ã†æ©Ÿä¼šãŒã‚ã‚Šã¾ã›ã‚“ã€‚ <code>bytestring</code> ãŒä½¿ãˆãŸã‚‰ååˆ†ã§ã™ã€‚</p>
<p>ãªãŠ AtCoder ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ <code>text</code> ã®å†…éƒ¨å®Ÿè£…ã«ã¯ UTF-16 ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ãŒã€æœ€è¿‘ã®å®Ÿè£…ã§ã¯ UTF-8 ã«ç§»è¡Œã—ãŸã‚ˆã†ã§ã™ã€‚ AtCoder ã®å¤–ã§ã¯ <code>text</code> ã®å¤©ä¸‹â€¦â€¦ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<h2 id="ä¸»ãª-api-1"><a class="header" href="#ä¸»ãª-api-1">ä¸»ãª API</a></h2>
<ul>
<li><code>T.pack</code>, <code>T.unpack</code></li>
<li><code>T.printf</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transformers"><a class="header" href="#transformers">transformers</a></h1>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ãƒ¢ãƒŠãƒ‰"><a class="header" href="#ãƒ¢ãƒŠãƒ‰">ãƒ¢ãƒŠãƒ‰</a></h1>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="io"><a class="header" href="#io">IO</a></h1>
<h2 id="realworld"><a class="header" href="#realworld">RealWorld</a></h2>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="st"><a class="header" href="#st">ST</a></h1>
<p>State thread</p>
<h2 id="runst"><a class="header" href="#runst"><code>runST</code></a></h2>
<p>TODO</p>
<h2 id="runst-ã«ãŠã‘ã‚‹åˆ¶ç´„"><a class="header" href="#runst-ã«ãŠã‘ã‚‹åˆ¶ç´„"><code>runST</code> ã«ãŠã‘ã‚‹åˆ¶ç´„</a></h2>
<p>TODO: forall</p>
<h2 id="runst-ã¨é¡ä¼¼ã®é–¢æ•°"><a class="header" href="#runst-ã¨é¡ä¼¼ã®é–¢æ•°"><code>runST</code> ã¨é¡ä¼¼ã®é–¢æ•°</a></h2>
<ul>
<li><code>VU.create</code></li>
<li><code>runSTUArray</code></li>
<li>TODO</li>
</ul>
<h2 id="vucreate-ã¨ä¼¼ãŸé–¢æ•°ã‚’è‡ªä½œã™ã‚‹"><a class="header" href="#vucreate-ã¨ä¼¼ãŸé–¢æ•°ã‚’è‡ªä½œã™ã‚‹"><code>VU.create</code> ã¨ä¼¼ãŸé–¢æ•°ã‚’è‡ªä½œã™ã‚‹</a></h2>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state"><a class="header" href="#state">State</a></h1>
<h2 id="ä¾‹-state-ãƒ¢ãƒŠãƒ‰ã§-mapaccuml"><a class="header" href="#ä¾‹-state-ãƒ¢ãƒŠãƒ‰ã§-mapaccuml">ä¾‹: <code>State</code> ãƒ¢ãƒŠãƒ‰ã§ <code>mapAccumL</code></a></h2>
<p>ç´¯ç©å’Œã®è¨ˆç®—ã«ã¯ <code>scanl</code>, <code>scanl1</code> ã‚’ä½¿ã†ã¨æ€ã„ã¾ã™ãŒã€ <code>mapAccumL</code> ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚</p>
<p><code>mapAccumL</code> ã¯çŠ¶æ…‹ã‚’æŒã£ãŸ <code>map</code> é–¢æ•°ã§ã™:</p>
<pre><code class="language-hs">#!/usr/bin/env stack

import Data.List

main :: IO ()
main = do
  -- æ•°åˆ— â†’ ç´¯ç©å’Œ
  -- [1, 2, 3] -&gt; (6, [1, 3, 6])
  print $ mapAccumL (\acc x -&gt; (acc + x, acc + x)) (0 :: Int) [1, 2, 3]

  -- ç´¯ç©å’Œ â†’ æ•°åˆ—ã‚‚ã§ãã‚‹ (`foldl'` ã§ã¯ç„¡ç†ã ã¨æ€ã„ã¾ã™)
</code></pre>
<p>åŒæ§˜ã®è¨ˆç®—ã¯ <code>mapM</code> ã¨ <code>State</code> ãƒ¢ãƒŠãƒ‰ã«ã‚ˆã‚Šè¡¨ç¾å¯èƒ½ã§ã™:</p>
<pre><code class="language-hs">#!/usr/bin/env stack

import Control.Monad.State
import Data.List

main :: IO ()
main = do
  -- æ•°åˆ— â†’ ç´¯ç©å’Œ
  -- [1, 2, 3] -&gt; ([1, 3, 6], 6)
  print $ runState (mapM (\x -&gt; state $ \acc -&gt; (x + acc, x + acc)) [1, 2, 3]) (0 :: Int)
</code></pre>
<p><code>mapAccumL</code> ã¯ <code>Traversable</code> ãªãƒ‡ãƒ¼ã‚¿å‹ã«ã—ã‹é©ç”¨ã§ãã¾ã›ã‚“ãŒã€<code>mapM</code> ãªã‚‰ <code>Vector</code> ã«ã‚‚ã‚ã‚‹ã®ã§é©ç”¨ã§ãã¾ã™ã€‚</p>
<!-- ```hs -->
<!--   print $ runState (sequenceA $ map (\x -> state $ \acc -> (x + acc, x + acc)) [1, 2, 3]) (0 :: Int) -->
<!--   print $ runState (traverse (\x -> state $ \acc -> (x + acc, x + acc)) [1, 2, 3]) (0 :: Int) -->
<!-- ``` -->
<h2 id="ä¾‹-do-è¨˜æ³•"><a class="header" href="#ä¾‹-do-è¨˜æ³•">ä¾‹: <code>do</code> è¨˜æ³•</a></h2>
<p>TODO: ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã®æ©æµ</p>
<p>TODO: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã® (æ‚ª) å½±éŸ¿</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ "><a class="header" href="#ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a></h1>
<p><a href="https://book.mynavi.jp/ec/products/detail/id=131288">ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡</a> ã‚’èª­ã‚“ã§å®Ÿè£…ã—ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ãƒãƒ¼ãƒˆã—ã¦ã„ãã¾ã™ã€‚</p>
<p><strong>è‘—ã—ãä½ã‚¯ã‚ªãƒªãƒ†ã‚£</strong> ã®å¯èƒ½æ€§ãŒé«˜ã„ã®ã§ãŠæ°—ã‚’ã¤ã‘ãã ã•ã„ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="2-åˆ†æ¢ç´¢"><a class="header" href="#2-åˆ†æ¢ç´¢">2 åˆ†æ¢ç´¢</a></h1>
<p>å‚è€ƒ: <a href="https://www.forcia.com/blog/001434.html">AtCoderç°ãƒ»èŒ¶ãƒ»ç·‘è‰²ã®æ–¹å¿…è¦‹ï¼äºŒåˆ†æ¢ç´¢ã‚’çµ¶å¯¾ã«ãƒã‚°ã‚‰ã›ãªã„ã§æ›¸ãæ–¹æ³•â”‚FORCIA CUBEâ”‚ãƒ•ã‚©ãƒ«ã‚·ã‚¢æ ªå¼ä¼šç¤¾</a></p>
<p>ã„ã‚ã‚†ã‚‹ã€ã¯ã­ã‚‹å¼ 2 åˆ†æ¢ç´¢ã€ã§ã™ã€‚</p>
<h2 id="å®Ÿè£…"><a class="header" href="#å®Ÿè£…">å®Ÿè£…</a></h2>
<pre><code class="language-hs">-- {{{ Binary search

-- | Binary search for sorted items in an inclusive range (from left to right only)
-- |
-- | It returns an `(ok, ng)` index pair at the boundary.
-- |
-- | # Example
-- |
-- | With an OK predicate `(&lt;= 5)`, list `[0..9]` can be seen as:
-- |
-- | &gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
-- | &gt;  &lt;--------------&gt;  &lt;--------&gt;
-- | &gt;         ok             ng
-- |
-- | In this case `bsearch` returns the `(ok, ng)` = `(5, 6)` pair:
-- |
-- | &gt; &gt; let xs = [0..9] in do
-- | &gt; &gt;   print $ bsearch (0, 9) (\i -&gt; xs !! i &lt;= 5)
-- | &gt; (5, 6)
bsearch :: (Int, Int) -&gt; (Int -&gt; Bool) -&gt; (Maybe Int, Maybe Int)
bsearch (low, high) isOk = bimap wrap wrap (loop (low - 1, high + 1) isOk)
  where
    loop (ok, ng) isOk
      | abs (ok - ng) == 1 = (ok, ng)
      | isOk m = loop (m, ng) isOk
      | otherwise = loop (ok, m) isOk
      where
        m = (ok + ng) `div` 2
    wrap :: Int -&gt; Maybe Int
    wrap x
      | x == low - 1 || x == high + 1 = Nothing
      | otherwise = Just x

-- }}}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="union-find"><a class="header" href="#union-find">Union-Find</a></h1>
<p>å‚è€ƒ: <a href="https://algo-method.com/descriptions/132">Union-Find ã¨ã¯ | ã‚¢ãƒ«ã‚´å¼</a></p>
<p>ãƒ‡ãƒ¼ã‚¿ã®ç›¸äº’æ’ä»–çš„ãªãƒ‡ãƒ¼ã‚¿åˆ†ã‘ãŒã§ãã¾ã™ã€‚</p>
<h2 id="å®Ÿè£…-mvector-ãƒ™ãƒ¼ã‚¹"><a class="header" href="#å®Ÿè£…-mvector-ãƒ™ãƒ¼ã‚¹">å®Ÿè£… (<code>MVector</code> ãƒ™ãƒ¼ã‚¹)</a></h2>
<p><code>MVector</code> ã‚’ä½¿ã†éƒ½åˆä¸Šã€æ·»å­—ã®ç¯„å›²ãŒæ¥µç«¯ã«åºƒã„å ´åˆã¯ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒåˆ¶é™ã‚’è¶…ãˆã¦ã—ã¾ã„ã¾ã™ãŒã€åº§æ¨™åœ§ç¸®ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ <code>PrimMonad</code> ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€å®Ÿè³ªçš„ã«ã¯ <code>IO</code> ã§ã—ã‹åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚</p>
</blockquote>
<pre><code class="language-hs">-- {{{ Union-Find tree

-- | Union-find implementation (originally by `@pel`)
newtype UnionFind s = UnionFind (VM.MVector s UfNode)

type IOUnionFind = UnionFind RealWorld

type STUnionFind s = UnionFind s

-- | `Child parent | Root size`. Not `Unbox` :(
data UfNode = Child {-# UNPACK #-} !Int | Root {-# UNPACK #-} !Int

-- | Creates a new Union-Find tree of the given size.
{-# INLINE newUF #-}
newUF :: (PrimMonad m) =&gt; Int -&gt; m (UnionFind (PrimState m))
newUF n = UnionFind &lt;$&gt; VM.replicate n (Root 1)

-- | Returns the root node index.
{-# INLINE root #-}
root :: (PrimMonad m) =&gt; UnionFind (PrimState m) -&gt; Int -&gt; m Int
root uf@(UnionFind vec) i = do
  node &lt;- VM.read vec i
  case node of
    Root _ -&gt; return i
    Child p -&gt; do
      r &lt;- root uf p
      -- NOTE(perf): path compression (move the queried node to just under the root, recursivelly)
      VM.write vec i (Child r)
      return r

-- | Checks if the two nodes are under the same root.
{-# INLINE same #-}
same :: (PrimMonad m) =&gt; UnionFind (PrimState m) -&gt; Int -&gt; Int -&gt; m Bool
same uf x y = liftM2 (==) (root uf x) (root uf y)

-- | Just an internal helper.
unwrapRoot :: UfNode -&gt; Int
unwrapRoot (Root s) = s
unwrapRoot (Child _) = undefined

-- | Unites two nodes.
{-# INLINE unite #-}
unite :: (PrimMonad m) =&gt; UnionFind (PrimState m) -&gt; Int -&gt; Int -&gt; m ()
unite uf@(UnionFind vec) x y = do
  px &lt;- root uf x
  py &lt;- root uf y
  when (px /= py) $ do
    sx &lt;- unwrapRoot &lt;$&gt; VM.read vec px
    sy &lt;- unwrapRoot &lt;$&gt; VM.read vec py
    -- NOTE(perf): union by rank (choose smaller one for root)
    let (par, chld) = if sx &lt; sy then (px, py) else (py, px)
    VM.write vec chld (Child par)
    VM.write vec par (Root (sx + sy))

-- | Returns the size of the root node, starting with `1`.
{-# INLINE size #-}
size :: (PrimMonad m) =&gt; UnionFind (PrimState m) -&gt; Int -&gt; m Int
size uf@(UnionFind vec) x = do
  px &lt;- root uf x
  s &lt;- unwrapRoot &lt;$&gt; VM.read vec px
  return s

-- }}}
</code></pre>
<p>TODO: ã¡ã‚ƒã‚“ã¨ <code>PrimMonad</code> ã‚’æ´»ã‹ã—ã¦ <code>ST</code> ãƒ¢ãƒŠãƒ‰ãŒæ´»ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼Ÿ</p>
<h2 id="å®Ÿè£…-intmap-ãƒ™ãƒ¼ã‚¹"><a class="header" href="#å®Ÿè£…-intmap-ãƒ™ãƒ¼ã‚¹">å®Ÿè£… (<code>IntMap</code> ãƒ™ãƒ¼ã‚¹)</a></h2>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨"><a class="header" href="#ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨">ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨</a></h1>
<p>å‚è€ƒ: <a href="https://book.mynavi.jp/ec/products/detail/id=131288">ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡</a></p>
<p>ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨ã¯ç•³ã¿è¾¼ã¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ã™ã€‚</p>
<h2 id="å®Ÿè£…-1"><a class="header" href="#å®Ÿè£…-1">å®Ÿè£…</a></h2>
<p>ã€é‰„å‰‡æœ¬ã€ã§ã¯å®Œå…¨ 2 åˆ†æœ¨ã‚’ãƒãƒƒã‚¯ã«ã—ãŸå®Ÿè£…ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚æ¦‚è¦ã ã‘èª­ã‚“ã§å®Ÿè£…ã—ã¾ã—ãŸã€‚</p>
<h3 id="ãƒ˜ãƒ«ãƒ‘ãƒ¼éƒ¨åˆ†"><a class="header" href="#ãƒ˜ãƒ«ãƒ‘ãƒ¼éƒ¨åˆ†">ãƒ˜ãƒ«ãƒ‘ãƒ¼éƒ¨åˆ†</a></h3>
<pre><code class="language-hs">-- {{{ Bits

-- | Log base of two or bit floor.
-- | &lt;https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-Bits.html#v:countLeadingZeros&gt;
log2 :: (FiniteBits b) =&gt; b -&gt; Int
log2 x = finiteBitSize x - 1 - countLeadingZeros x

-- | Ceiling of log base 2 of an `Int`.
-- |
-- | # Example
-- |
-- | ```hs
-- | &gt; log2 3
-- | 1
-- | &gt; log2CeilInt 3
-- | 2
-- | ```
log2CeilInt :: Int -&gt; Int
log2CeilInt x = msb + ceiling
  where
    msb = log2 x
    ceiling = if (clearBit x msb) &gt; 0 then 1 else 0

-- | Calculates the smallest integral power of two that is not smaller than `x`.
-- |
-- | # Example
-- |
-- | ```hs
-- | &gt; bitCeil 3
-- | 4
-- | ```
bitCeil :: Int -&gt; Int
bitCeil = bit . log2CeilInt

-- }}}
</code></pre>
<h3 id="æœ¬å®Ÿè£…"><a class="header" href="#æœ¬å®Ÿè£…">æœ¬å®Ÿè£…</a></h3>
<pre><code class="language-hs">-- {{{ Segment tree

-- | A mutable segment tree backed by a complete binary tree.
-- |
-- | # Overview
-- |
-- | A segment tree is a cache of a folding function.
-- | Each node corresponds to a folding range and the node contains the folding result.
-- |
-- | A segment tree has a constant size and never be resized.
-- |
-- | # Operations
-- |
-- | Modification takes $O(log N)$, so creation takes $N(log N)$.
-- | Lookup takes $O(log N)$.
-- |
-- | # (Internal) Indices
-- |
-- | The complete binary tree has `2 ^ depth - 1` elements.
-- |
-- | - Child elements of a parent node `i` has index `2 * i + 1` and `2 * i + 2`.
-- | - The leaf indices start with `length / 2 - 1`.
-- |
-- | Example:
-- |
-- | ```
-- |            0
-- |      1           2
-- |   3     4     5     6
-- | 07 08 09 10 11 12 13 14
-- | ```
data MSegmentTree s a = MSegmentTree (a -&gt; a -&gt; a) (VUM.MVector s a)

-- TODO: Generic queries and immutable segment tree (with `Show` instance)

-- | Creates a new segment tree for `n` leaves.
{-# INLINE newTree #-}
newTree :: (VUM.Unbox a, PrimMonad m) =&gt; (a -&gt; a -&gt; a) -&gt; Int -&gt; a -&gt; m (MSegmentTree (PrimState m) a)
newTree !f !n !value = MSegmentTree f &lt;$&gt; VUM.replicate n' value
  where
    !n' = shiftL (bitCeil n) 1

-- | Updates an `MSegmentTree` leaf value and their parents up to top root.
{-# INLINE updateLeaf #-}
updateLeaf :: (VU.Unbox a, PrimMonad m) =&gt; MSegmentTree (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
updateLeaf tree@(MSegmentTree _ vec) !i !value = _updateElement tree i' value
  where
    -- length == 2 * (the number of the leaves)
    !offset = (VUM.length vec) `div` 2 - 1
    !i' = i + offset

-- | (Internal) Updates an `MSegmentTree` element (node or leaf) value and their parents up to top root.
{-# INLINE _updateElement #-}
_updateElement :: (VU.Unbox a, PrimMonad m) =&gt; MSegmentTree (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
_updateElement tree@(MSegmentTree _ vec) !i !value = do
  VUM.write vec i value
  _updateParent tree ((i - 1) `div` 2)

-- | (Internal) Recursivelly updates the parent nodes.
{-# INLINE _updateParent #-}
_updateParent :: (VU.Unbox a, PrimMonad m) =&gt; MSegmentTree (PrimState m) a -&gt; Int -&gt; m ()
_updateParent _ (-1) = pure () -- REMARK: (-1) `div` 2 == -1
_updateParent _ 0 = pure ()
_updateParent tree@(MSegmentTree f vec) !iParent = do
  !c1 &lt;- VUM.read vec (iParent * 2 + 1)
  !c2 &lt;- VUM.read vec (iParent * 2 + 2)
  _updateElement tree iParent (f c1 c2)

-- | Retrieves the folding result over the inclusive range `[l, r]` from `MSegmentTree`.
{-# INLINE queryByRange #-}
queryByRange :: forall a m. (VU.Unbox a, PrimMonad m) =&gt; MSegmentTree (PrimState m) a -&gt; (Int, Int) -&gt; m a
queryByRange (MSegmentTree !f !vec) (!lo, !hi) = fromJust &lt;$&gt; loop 0 (0, initialHi)
  where
    !initialHi = (VUM.length vec) `div` 2 - 1
    loop :: Int -&gt; (Int, Int) -&gt; m (Maybe a)
    loop !i (!l, !h)
      | lo &lt;= l &amp;&amp; h &lt;= hi = Just &lt;$&gt; VUM.read vec i
      | h &lt; lo || hi &lt; l = pure Nothing
      | otherwise = do
        let d = (h - l) `div` 2
        !ansL &lt;- loop (2 * i + 1) (l, l + d)
        !ansH &lt;- loop (2 * i + 2) (l + d + 1, h)
        pure . Just $ case (ansL, ansH) of
          (Just !a, Just !b) -&gt; f a b
          (Just !a, _) -&gt; a
          (_, Just !b) -&gt; b
          (_, _) -&gt; error &quot;query error (segment tree)&quot;

-- }}}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ãã®ä»–"><a class="header" href="#ãã®ä»–">ãã®ä»–</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="è¨€èªæ‹¡å¼µã«ã¤ã„ã¦"><a class="header" href="#è¨€èªæ‹¡å¼µã«ã¤ã„ã¦">è¨€èªæ‹¡å¼µã«ã¤ã„ã¦</a></h1>
<p>TODO: GHC ã®è¨€èªæ‹¡å¼µã¨ã¯</p>
<h2 id="æ›¸ãæ–¹"><a class="header" href="#æ›¸ãæ–¹">æ›¸ãæ–¹</a></h2>
<p>ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ (<code>ormolu</code>) ã¯è¨€èªæ‹¡å¼µã‚’ 1 è¡Œãšã¤ã®åˆ†ã‘ã¦ã—ã¾ã„ã¾ã™:</p>
<pre><code class="language-hs">{-# LANGUAGE BangPatterns #-}
{-# BlockArguments #-}
{-# LambdaCase #-}
{-# MultiWayIf #-}
{-# PatternGuards #-}
{-# TupleSections #-}
-- ..
</code></pre>
<p>ãã“ã§è¨€èªæ‹¡å¼µã®å®£è¨€ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã®é©ç”¨å¤–ã«ã—ã¦ã€ã‚³ãƒ¼ãƒ‰è¡Œæ•°ã‚’å‰Šæ¸›ã§ãã¾ã™:</p>
<pre><code class="language-hs">{- ORMOLU_DISABLE -}
{-# LANGUAGE BangPatterns, BlockArguments, LambdaCase, MultiWayIf, PatternGuards, TupleSections #-}
{-# LANGUAGE NumDecimals, NumericUnderscores #-}
{-# LANGUAGE FlexibleInstances, MultiParamTypeClasses, ScopedTypeVariables, TypeApplications #-}
{-# LANGUAGE TypeFamilies #-}
{- ORMOLU_ENABLE -}
</code></pre>
<h2 id="ãŠã™ã™ã‚ã—ãªã„è¨€èªæ‹¡å¼µ"><a class="header" href="#ãŠã™ã™ã‚ã—ãªã„è¨€èªæ‹¡å¼µ">ãŠã™ã™ã‚ã—ãªã„è¨€èªæ‹¡å¼µ</a></h2>
<h3 id="npluskpatterns"><a class="header" href="#npluskpatterns">NPlusKPatterns</a></h3>
<p>ãƒ‘ã‚¿ãƒ³ã‚’ <code>n + 1</code> ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹æ‹¡å¼µã§ã™ã€‚ã“ã®æ‹¡å¼µã‚’æœ‰åŠ¹ã«ã—ã¦ <code>ghci</code> ã‚’èµ·å‹•ã—ã¦ã¿ã¾ã™:</p>
<pre><code class="language-sh">$ ghci -XNPlusKPatterns
Prelude&gt; 
</code></pre>
<p>ä¸€è¦‹ N + K ãƒ‘ã‚¿ãƒ³ã¯å•é¡Œãªãå‹•ãã¾ã™:</p>
<pre><code class="language-hs">Prelude&gt; let (n + 1) = 1
Prelude&gt; n
0
</code></pre>
<p>ã—ã‹ã— <code>n</code> ãŒè² ã®æ•°ã«ãªã‚‹ãƒ‘ã‚¿ãƒ³ã§ã¯å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™:</p>
<pre><code class="language-hs">Prelude&gt; let (n + 1) = 0
Prelude&gt; n
*** Exception: &lt;interactive&gt;:3:5-15: Non-exhaustive patterns in n+1
</code></pre>
<p>ã“ã®ã‚ˆã†ã«ç½ ãŒã‚ã‚‹ä»¥ä¸Šã€å¤šå°‘å†—é•·ã§ã‚‚ <code>let</code> ã‚„ <code>where</code> ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã—ãŸã€‚ <a href="https://sites.google.com/site/haskell/notes/nkpatterns">è©³ç´°</a> (æœªç¢ºèª)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ã‚«ãƒªãƒ¼åŒ–ã«ã¤ã„ã¦"><a class="header" href="#ã‚«ãƒªãƒ¼åŒ–ã«ã¤ã„ã¦">ã‚«ãƒªãƒ¼åŒ–ã«ã¤ã„ã¦</a></h1>
<p>å‚è€ƒ: <a href="https://kazu-yamamoto.hatenablog.jp/entry/20110906/1315279311">ã‚«ãƒªãƒ¼åŒ–è«‡ç¾© - ã‚ã©ã‘ãªã„è©±</a></p>
<h2 id="å¤šå¤‰æ•°é–¢æ•°ã®è¡¨ç¾ã¨ã—ã¦"><a class="header" href="#å¤šå¤‰æ•°é–¢æ•°ã®è¡¨ç¾ã¨ã—ã¦">å¤šå¤‰æ•°é–¢æ•°ã®è¡¨ç¾ã¨ã—ã¦</a></h2>
<p>TODO: <a href="https://www.fos.kuis.kyoto-u.ac.jp/%7Eigarashi/CoPL/">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®åŸºç¤æ¦‚å¿µ</a></p>
<p>TODO: Applicative ã«ãŠã‘ã‚‹ <code>(a -&gt; b)</code> ã®å…·ä½“ä¾‹ã« <code>(a -&gt; b' -&gt; c)</code> ãŒã‚ã‚‹ã€‚ã“ã‚Œã‚‚ã‚«ãƒªãƒ¼åŒ–ï¼Ÿ</p>
<h2 id="ã‚¿ãƒ—ãƒ«ã®å¼•æ•°ã‚’å€‹åˆ¥ã®å¼•æ•°ã«ãƒãƒ©ã™ã¨ã„ã†æ„å‘³ã§"><a class="header" href="#ã‚¿ãƒ—ãƒ«ã®å¼•æ•°ã‚’å€‹åˆ¥ã®å¼•æ•°ã«ãƒãƒ©ã™ã¨ã„ã†æ„å‘³ã§">ã‚¿ãƒ—ãƒ«ã®å¼•æ•°ã‚’å€‹åˆ¥ã®å¼•æ•°ã«ãƒãƒ©ã™ã¨ã„ã†æ„å‘³ã§</a></h2>
<p>TODO: <code>curry</code>, <code>uncurry</code></p>
<h2 id="éƒ¨åˆ†é©ç”¨ã«ã¤ã„ã¦"><a class="header" href="#éƒ¨åˆ†é©ç”¨ã«ã¤ã„ã¦">éƒ¨åˆ†é©ç”¨ã«ã¤ã„ã¦</a></h2>
<p>TODO: ä¸€èˆ¬ã®éƒ¨åˆ†é©ç”¨ã¯é †ä¸åŒã€ã‚«ãƒªãƒ¼åŒ–ã•ã‚ŒãŸé–¢æ•°ã®éƒ¨åˆ†é©ç”¨ã¯ 1 æ–¹å‘ã®é †ç•ª</p>
<p>TODO: <code>.</code> æ¼”ç®—å­ã€ <code>$</code> æ¼”ç®—å­ã€ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ãªã©ã¨çµ¡ã‚ãŸã„</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«"><a class="header" href="#ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«">ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«</a></h1>
<p>ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã¯é–¢æ•°åˆæˆã«ä¾¿åˆ©ã§ã™ã€‚é–¢æ•°é©ç”¨ã®è©•ä¾¡é †ãŒæœ€ã‚‚é«˜ã„ã¨ã„ã†ã®ã‚‚é–¢ä¿‚ã—ã¦ã„ã¾ã™ã€‚</p>
<p>TODO: ã¨ã„ã†è¶£æ—¨ã§ã‚ã£ã¦ã„ã‚‹ï¼Ÿ</p>
<h2 id="ä¾‹-2"><a class="header" href="#ä¾‹-2">ä¾‹</a></h2>
<p>TODO:</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å°ãƒã‚¿"><a class="header" href="#å°ãƒã‚¿">å°ãƒã‚¿</a></h1>
<h2 id="haskell"><a class="header" href="#haskell">Haskell</a></h2>
<ul>
<li><a href="https://twitter.com/search?q=from%3Atanakh%20%E3%83%A2%E3%83%8A%E3%83%89%20%E3%82%BC%E3%83%8E%E3%83%96%E3%83%AC%E3%82%A4%E3%83%89&amp;src=typed_query&amp;f=top">ãƒ¢ãƒŠãƒ‰ã®åŠ›</a></li>
<li>Pointless style (point-free style ã¸ã®ã‚¸ãƒ§ãƒ¼ã‚¯)</li>
</ul>
<h2 id="atcoder"><a class="header" href="#atcoder">AtCoder</a></h2>
<ul>
<li><a href="https://www.pixiv.net/en/artworks/81829657">å…¨ã¦ã®é»’å¹•ãŒchokudaiã ã£ãŸè©±</a></li>
</ul>
<!-- - æ…¶å¿œ -->

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
